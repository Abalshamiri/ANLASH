<div class="modal-header">
    <h4 class="modal-title">
        <span *ngIf="!isEditMode">{{ "CreateNewUniversity" | localize }}</span>
        <span *ngIf="isEditMode">{{ "Edit" | localize }} {{ "University" | localize }}</span>
    </h4>
    <button type="button" class="btn-close" (click)="bsModalRef.hide()" [attr.aria-label]="l('Close')"></button>
</div>

<form #universityForm="ngForm" (ngSubmit)="save()" autocomplete="off">
    <div class="modal-body" style="max-height: 70vh; overflow-y: auto;">

        <div class="row">
            <!-- Name (EN) -->
            <div class="col-md-6 mb-3">
                <label class="form-label">{{ 'Name' | localize }} (EN) <span class="text-danger">*</span></label>
                <input type="text" class="form-control" [(ngModel)]="university.name" name="name" required
                    [class.is-invalid]="universityForm.submitted && !university.name" />
                <div class="invalid-feedback" *ngIf="universityForm.submitted && !university.name">
                    {{ 'ThisFieldIsRequired' | localize }}
                </div>
            </div>

            <!-- Name (AR) -->
            <div class="col-md-6 mb-3">
                <label class="form-label">{{ 'Name' | localize }} (AR)</label>
                <input type="text" class="form-control" [(ngModel)]="university.nameAr" name="nameAr" dir="rtl" />
            </div>
        </div>

        <!-- Description (EN) -->
        <div class="mb-3">
            <label class="form-label">{{ 'Description' | localize }} (EN)</label>
            <textarea class="form-control" rows="3" [(ngModel)]="university.description" name="description"></textarea>
        </div>

        <!-- Description (AR) -->
        <div class="mb-3">
            <label class="form-label">{{ 'Description' | localize }} (AR)</label>
            <textarea class="form-control" rows="3" [(ngModel)]="university.descriptionAr" name="descriptionAr"
                dir="rtl"></textarea>
        </div>

        <div class="row">
            <!-- Country -->
            <div class="col-md-6 mb-3">
                <label class="form-label">{{ 'Country' | localize }} <span class="text-danger">*</span></label>
                <input type="text" class="form-control" [(ngModel)]="university.country" name="country" required
                    [class.is-invalid]="universityForm.submitted && !university.country" />
                <div class="invalid-feedback" *ngIf="universityForm.submitted && !university.country">
                    {{ 'ThisFieldIsRequired' | localize }}
                </div>
            </div>

            <!-- City -->
            <div class="col-md-6 mb-3">
                <label class="form-label">{{ 'City' | localize }} <span class="text-danger">*</span></label>
                <input type="text" class="form-control" [(ngModel)]="university.city" name="city" required
                    [class.is-invalid]="universityForm.submitted && !university.city" />
                <div class="invalid-feedback" *ngIf="universityForm.submitted && !university.city">
                    {{ 'ThisFieldIsRequired' | localize }}
                </div>
            </div>
        </div>

        <!-- Address -->
        <div class="mb-3">
            <label class="form-label">{{ 'Address' | localize }}</label>
            <textarea class="form-control" rows="2" [(ngModel)]="university.address" name="address"></textarea>
        </div>

        <div class="row">
            <!-- Type -->
            <div class="col-md-4 mb-3">
                <label class="form-label">{{ 'Type' | localize }}</label>
                <select class="form-select" [(ngModel)]="university.type" name="type">
                    <option [value]="1">{{ 'Public' | localize }}</option>
                    <option [value]="2">{{ 'Private' | localize }}</option>
                    <option [value]="3">{{ 'International' | localize }}</option>
                </select>
            </div>

            <!-- Establishment Year -->
            <div class="col-md-4 mb-3">
                <label class="form-label">{{ 'EstablishmentYear' | localize }}</label>
                <input type="number" class="form-control" [(ngModel)]="university.establishmentYear"
                    name="establishmentYear" min="1800" max="2025" />
            </div>

            <!-- Rating -->
            <div class="col-md-4 mb-3">
                <label class="form-label">{{ 'Rating' | localize }} (0-5)</label>
                <input type="number" class="form-control" [(ngModel)]="university.rating" name="rating" min="0" max="5"
                    step="0.1" />
            </div>
        </div>

        <div class="row">
            <!-- Website -->
            <div class="col-md-6 mb-3">
                <label class="form-label">{{ 'WebsiteUrl' | localize }}</label>
                <input type="url" class="form-control" [(ngModel)]="university.websiteUrl" name="websiteUrl"
                    placeholder="https://" />
            </div>

            <!-- Email -->
            <div class="col-md-6 mb-3">
                <label class="form-label">{{ 'Email' | localize }}</label>
                <input type="email" class="form-control" [(ngModel)]="university.email" name="email" />
            </div>
        </div>

        <!-- Phone -->
        <div class="mb-3">
            <label class="form-label">{{ 'Phone' | localize }}</label>
            <input type="tel" class="form-control" [(ngModel)]="university.phone" name="phone" />
        </div>

        <div class="row">
            <!-- Slug (EN) -->
            <div class="col-md-6 mb-3">
                <label class="form-label">{{ 'Slug' | localize }} (EN)</label>
                <input type="text" class="form-control" [(ngModel)]="university.slug" name="slug" />
                <small class="form-text text-muted">{{ 'LeaveEmptyToAutoGenerate' | localize }}</small>
            </div>

            <!-- Slug (AR) -->
            <div class="col-md-6 mb-3">
                <label class="form-label">{{ 'Slug' | localize }} (AR)</label>
                <input type="text" class="form-control" [(ngModel)]="university.slugAr" name="slugAr" dir="rtl" />
            </div>
        </div>

        <!-- Logo URL -->
        <div class="mb-3">
            <label class="form-label">{{ 'LogoUrl' | localize }}</label>
            <input type="url" class="form-control" [(ngModel)]="university.logoUrl" name="logoUrl"
                placeholder="https://" />
            <small class="form-text text-muted">Enter image URL or leave empty</small>
        </div>

        <!-- Checkboxes -->
        <div class="form-check mb-2">
            <input type="checkbox" class="form-check-input" [(ngModel)]="university.isActive" name="isActive"
                id="isActive" />
            <label class="form-check-label" for="isActive">
                {{ 'IsActive' | localize }}
            </label>
        </div>

        <div class="form-check mb-3">
            <input type="checkbox" class="form-check-input" [(ngModel)]="university.isFeatured" name="isFeatured"
                id="isFeatured" />
            <label class="form-check-label" for="isFeatured">
                {{ 'IsFeatured' | localize }}
            </label>
        </div>

    </div>

    <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="bsModalRef.hide()">
            {{ 'Cancel' | localize }}
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="saving">
            <i class="fa fa-save"></i>
            <span *ngIf="!saving">{{ 'Save' | localize }}</span>
            <span *ngIf="saving">
                <i class="fa fa-spinner fa-spin"></i> {{ 'Saving' | localize }}...
            </span>
        </button>
    </div>
</form>