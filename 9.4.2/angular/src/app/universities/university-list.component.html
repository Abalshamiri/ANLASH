<div [@routerTransition]>
    <section class="content-header">
        <div class="container-fluid">
            <div class="row">
                <div class="col-6">
                    <h1>{{ "Universities" | localize }}</h1>
                </div>
                <div class="col-6 text-right">
                    <button class="btn btn-primary" (click)="create()">
                        <i class="fa fa-plus"></i> {{ "CreateNew" | localize }}
                    </button>
                </div>
            </div>
        </div>
    </section>

    <section class="content">
        <div class="container-fluid">
            <div class="card">
                <div class="card-header">
                    <div class="input-group">
                        <input type="text" class="form-control" [(ngModel)]="filterText"
                            (keyup.enter)="getUniversities()" placeholder="{{ 'SearchWithThreeDot' | localize }}" />
                        <div class="input-group-append">
                            <button class="btn btn-primary" (click)="getUniversities()">
                                <i class="fa fa-search"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered">
                            <thead class="bg-light">
                                <tr>
                                    <th>{{ 'Logo' | localize }}</th>
                                    <th>{{ 'Name' | localize }}</th>
                                    <th>{{ 'City' | localize }}</th>
                                    <th>{{ 'Country' | localize }}</th>
                                    <th>{{ 'Rating' | localize }}</th>
                                    <th>{{ 'Status' | localize }}</th>
                                    <th>{{ 'CreatedBy' | localize }}</th>
                                    <th>{{ 'CreationDate' | localize }}</th>
                                    <th>{{ 'LastModifiedBy' | localize }}</th>
                                    <th>{{ 'LastModified' | localize }}</th>
                                    <th>{{ 'Actions' | localize }}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let university of universities">
                                    <td>
                                        <img [src]="university.logoUrl || 'https://via.placeholder.com/60'"
                                            class="img-thumbnail"
                                            style="width: 60px; height: 60px; object-fit: cover;" />
                                    </td>
                                    <td>
                                        <strong>{{ university.name }}</strong>
                                        <br />
                                        <small class="text-muted" *ngIf="university.nameAr">{{ university.nameAr
                                            }}</small>
                                    </td>
                                    <td>{{ university.city }}</td>
                                    <td>{{ university.country }}</td>
                                    <td>
                                        <span class="badge badge-warning">
                                            <i class="fa fa-star"></i> {{ university.rating | number:'1.1-1' }}
                                        </span>
                                    </td>
                                    <td>
                                        <span *ngIf="university.isActive" class="badge badge-success">
                                            {{ "Active" | localize }}
                                        </span>
                                        <span *ngIf="!university.isActive" class="badge badge-secondary">
                                            {{ "Inactive" | localize }}
                                        </span>
                                        <br *ngIf="university.isFeatured" />
                                        <span *ngIf="university.isFeatured" class="badge badge-info mt-1">
                                            <i class="fa fa-star"></i> {{ "Featured" | localize }}
                                        </span>
                                    </td>
                                    <td>
                                        <small class="text-muted">User #{{ university.creatorUserId }}</small>
                                    </td>
                                    <td>
                                        <small class="text-muted">{{ university.creationTime | date:'short' }}</small>
                                    </td>
                                    <td>
                                        <small class="text-muted" *ngIf="university.lastModifierUserId">
                                            User #{{ university.lastModifierUserId }}
                                        </small>
                                        <small class="text-muted" *ngIf="!university.lastModifierUserId">-</small>
                                    </td>
                                    <td>
                                        <small class="text-muted" *ngIf="university.lastModificationTime">
                                            {{ university.lastModificationTime | date:'short' }}
                                        </small>
                                        <small class="text-muted" *ngIf="!university.lastModificationTime">-</small>
                                    </td>
                                    <td>
                                        <button class="btn btn-sm btn-primary mr-1" (click)="edit(university)"
                                            title="{{ 'Edit' | localize }}">
                                            <i class="fa fa-edit"></i>
                                        </button>
                                        <button class="btn btn-sm btn-danger" (click)="delete(university)"
                                            title="{{ 'Delete' | localize }}">
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr *ngIf="universities && universities.length === 0">
                                    <td colspan="11" class="text-center text-muted">
                                        {{ "NoData" | localize }}
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="row align-items-center mt-3" *ngIf="totalCount > 0">
                        <div class="col-sm-6">
                            <span>
                                {{ "TotalRecordsCount" | localize: totalCount }}
                            </span>
                        </div>
                        <div class="col-sm-6 text-right">
                            <pagination [totalItems]="totalCount" [itemsPerPage]="maxResultCount"
                                [(ngModel)]="skipCount" (pageChanged)="pageChanged($event)" [maxSize]="5"
                                [boundaryLinks]="true" [rotate]="false" previousText="&lsaquo;" nextText="&rsaquo;"
                                firstText="&laquo;" lastText="&raquo;">
                            </pagination>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>